<!DOCTYPE html>
<html>
    <script>
        window.onload = () => {
            var listado = new Listado (document.getElementById("listado"));
            listado.cargarListado();
            var carrito = new Carrito (document.getElementById("carrito"));
            carrito.mostrarCarrito();
        };
        
        class Producto {
            constructor(id, descripcion, precio) {
                this.id = id;
                this.descripcion = descripcion;
                this.precio = precio;
                this.cantidad = 0;
            };
        };

        class Listado {
            constructor(htmlElement) {
                this.htmlElement = htmlElement;
                this.productos = [
                    new Producto("yerba", "500 grs", 400),
                    new Producto("azucar", "1 kg", 500),
                    new Producto("galletitas", "250 grs", 200),
                ]
            }

            cargarListado() {
                for(var i = 0; i < this.productos.length; i++) {
                    var iProducto = this.productos[i];
                    var producto = document.createElement("div");
                    var titulo = document.createElement("h3");
                    this.htmlElement.appendChild(producto);
                    producto.appendChild(titulo);
                    titulo.innerHTML = this.productos[i].id;
                    var descrip = document.createElement("h5");
                    descrip.innerHTML = this.productos[i].descripcion;
                    producto.appendChild(descrip);
                    var precio = document.createElement("h5");
                    precio.innerHTML = this.productos[i].precio;
                    producto.appendChild(precio);
                    var agregarProducto = document.createElement("button");
                    agregarProducto.innerHTML = "Agregar" 
                    agregarProducto.addEventListener('click', function() {agregarCarrito(iProducto.id)});
                    producto.appendChild(agregarProducto);   
                }
            }

        }

        class Carrito {
            constructor(htmlElement) {
                this.htmlElement = htmlElement;
                this.items = [];
            }
            mostrarCarrito() {
                for(var i = 0; i < this.items.length; i++) {
                    var producto = document.createElement("div");
                    var titulo = document.createElement("h3");
                    producto.appendChild(titulo);
                    titulo.innerHTML = this.items[i].id;
                    var descrip = document.createElement("h5");
                    descrip.innerHTML = this.items[i].descripcion;
                    producto.appendChild(descrip);
                    var precio = document.createElement("h5");
                    precio.innerHTML = this.items[i].precio;
                    producto.appendChild(precio);
                    this.htmlElement.appendChild(producto);
                }
            }
        }

            function agregarCarrito(id) {   

                arreglo.forEach(p => {
                    if(p.id === id) {
                        this.items.push(p);
                    }
                })   
                this.mostrarCarrito();      
            }

    </script>
    <head>

    </head>
    <body>
        <div id="listado">
            <h2>Lista de productos</h2>
        </div>
        <div>
            <h2>Carrito</h2>
            <ul id="carrito">
            </ul>
        </div>
    </body>
</html>
